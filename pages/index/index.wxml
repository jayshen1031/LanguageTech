<view class="container">
  <!-- 登录提示界面 -->
  <view wx:if="{{showLoginPrompt}}" class="login-prompt-overlay">
    <view class="login-prompt-card">
      <view class="prompt-icon">🔐</view>
      <text class="prompt-title">欢迎使用语伴君</text>
      <text class="prompt-subtitle">微信登录后即可开始学习</text>
      <view class="prompt-benefits">
        <text class="benefit-item">• 学习进度云端同步</text>
        <text class="benefit-item">• 个性化学习计划</text>
        <text class="benefit-item">• 海量学习内容</text>
        <text class="benefit-item">• 句子解析功能需审核通过</text>
      </view>
      <button class="login-btn" bindtap="goToRegister">微信快速登录</button>
    </view>
  </view>

  <!-- 主要内容（需要认证） -->
  <view wx:else>
    <!-- 顶部背景 -->
    <view class="header-bg">
      <view class="bg-circle circle-1"></view>
      <view class="bg-circle circle-2"></view>
    </view>
    
    <!-- 用户信息区 -->
    <view class="user-section clickable-section" bindtap="goToProfile" bindlongpress="showQuickAccountMenu">
      <view class="user-avatar">
        <image wx:if="{{userInfo.avatarUrl}}" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
        <text wx:else class="avatar-icon">👤</text>
      </view>
      <view class="user-info">
        <text class="user-name">{{userInfo.nickName || '语伴君用户'}}</text>
        <view class="user-subtitle">
          <text class="quick-stats">连续{{studyDays}}天 · {{todayCompleted ? '今日已完成' : '今日待学习'}}</text>
          <text class="goto-arrow">＞</text>
        </view>
      </view>
    </view>

  <!-- 学习仪表板 -->
  <view class="dashboard">
    <view class="dashboard-header">
      <text class="dashboard-title">学习仪表板</text>
      <text class="dashboard-subtitle">今日学习进度和数据概览</text>
    </view>
    
    <!-- 数据概览 -->
    <view class="data-overview">
      <view class="overview-item" bindtap="goToVocabularyList" data-type="all">
        <text class="overview-number">{{totalWordsInLibrary}}</text>
        <text class="overview-label">词汇</text>
        <text class="overview-detail">已掌握{{masteredWords}}</text>
        <view class="vocab-manage-btn" catchtap="onVocabManage">🔧</view>
      </view>
      <view class="overview-divider"></view>
      <view class="overview-item" bindtap="goToStructureList" data-type="all">
        <text class="overview-number">{{totalStructures}}</text>
        <text class="overview-label">句型</text>
        <text class="overview-detail">已掌握{{masteredStructures}}</text>
      </view>
      <view class="overview-divider"></view>
      <view class="overview-item" bindtap="goToLearningProgress">
        <text class="overview-number">{{studyDays}}</text>
        <text class="overview-label">学习天数</text>
        <text class="overview-detail">{{todayCompleted ? '今日已完成' : '今日待学习'}}</text>
      </view>
    </view>
  </view>

  <!-- 今日学习 -->
  <view class="today-learning">
    <view class="learning-header">
      <text class="learning-title">今日学习计划</text>
      <view class="learning-config" bindtap="goToStudySettings">
        <text class="config-text">设置</text>
        <text class="config-icon">⚙️</text>
      </view>
    </view>

    <!-- 智能学习 -->
    <view class="smart-learning-btn" bindtap="goToSmartPlan">
      <view class="smart-content">
        <view class="smart-icon">🎯</view>
        <view class="smart-text">
          <text class="smart-title">智能学习</text>
          <text class="smart-desc">AI智能生成每日学习计划</text>
        </view>
      </view>
      <text class="smart-arrow">▶</text>
    </view>
  </view>

  <!-- 快捷功能 -->
  <view class="quick-functions">
    <view class="section-header">
      <text class="section-title">快捷功能</text>
    </view>
    <view class="quick-grid">
      <view class="quick-card primary" bindtap="goToParser">
        <view class="quick-icon">🔍</view>
        <text class="quick-title">句子解析</text>
        <text class="quick-desc">AI智能分析</text>
      </view>
      
      <view class="quick-card" bindtap="goToLearningProgress">
        <view class="quick-icon">📈</view>
        <text class="quick-title">学习历史</text>
        <text class="quick-desc">学习轨迹</text>
      </view>
      
      <view class="quick-card" bindtap="goToKanaMerged">
        <view class="quick-icon">あア</view>
        <text class="quick-title">假名对照</text>
        <text class="quick-desc">基础工具</text>
      </view>
      
      <view class="quick-card" bindtap="goToGrammarLibrary">
        <view class="quick-icon">📖</view>
        <text class="quick-title">语法库</text>
        <text class="quick-desc">语法参考</text>
      </view>
      
      <view class="quick-card" bindtap="goToVoiceDialogue">
        <view class="quick-icon">🎤</view>
        <text class="quick-title">语音对话</text>
        <text class="quick-desc">口语练习</text>
      </view>
      
      <view class="quick-card" bindtap="goToParserHistory">
        <view class="quick-icon">📚</view>
        <text class="quick-title">解析历史</text>
        <text class="quick-desc">解析记录</text>
      </view>
    </view>
  </view>
  <!-- 主要内容区域结束 -->
  </view>

</view>