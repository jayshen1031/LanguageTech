<view class="container">
  <!-- 顶部背景 -->
  <view class="header-bg">
    <view class="bg-circle circle-1"></view>
    <view class="bg-circle circle-2"></view>
  </view>
  
  <!-- 用户信息区 -->
  <view class="user-section">
    <view class="user-avatar">
      <image wx:if="{{userInfo.avatarUrl}}" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <text wx:else class="avatar-icon">👤</text>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.nickName || '语伴君用户'}}</text>
      <view class="user-badges">
        <view class="badge">
          <text class="badge-icon">🔥</text>
          <text class="badge-text">连续{{studyDays}}天</text>
        </view>
        <view class="badge {{todayCompleted ? 'completed' : ''}}">
          <text class="badge-icon">{{todayCompleted ? '✅' : '⏰'}}</text>
          <text class="badge-text">今日{{todayCompleted ? '已完成' : '待学习'}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 词汇库统计卡片 -->
  <view class="stats-card">
    <view class="stats-item">
      <text class="stats-value">{{totalWordsInLibrary}}</text>
      <text class="stats-label">总词汇量</text>
    </view>
    <view class="stats-divider"></view>
    <view class="stats-item primary">
      <text class="stats-value">{{newWordsAvailable}}</text>
      <text class="stats-label">新词汇</text>
    </view>
    <view class="stats-divider"></view>
    <view class="stats-item">
      <text class="stats-value">{{reviewWordsAvailable}}</text>
      <text class="stats-label">复习词汇</text>
    </view>
  </view>

  <!-- 今日学习计划 -->
  <view class="learning-plan">
    <view class="plan-header">
      <text class="plan-title">学习计划设置</text>
      <view class="plan-settings" bindtap="showStudyAmountSelection">
        <text class="settings-text">{{selectedTotal}}个</text>
        <text class="settings-icon">⚙️</text>
      </view>
    </view>
    
    <!-- 学习量说明 -->
    <view class="plan-summary">
      <text class="summary-text">当前计划：{{selectedTotal}}个词汇 (新学{{newWordsCount}} + 复习{{reviewWordsCount}})</text>
      <text class="summary-ratio">复习75% + 新学25%</text>
    </view>
    
    <!-- 学习计划卡片 -->
    <view class="plan-cards">
      <view class="plan-card new-words" bindtap="goToNewWords">
        <view class="card-header">
          <text class="card-title">新学词汇</text>
          <view class="card-icon">📘</view>
        </view>
        <view class="card-count">{{newWordsCount}}</view>
        <view class="card-desc">25% · 掌握新词</view>
      </view>
      
      <view class="plan-card review-words" bindtap="goToReviewWords">
        <view class="card-header">
          <text class="card-title">复习巩固</text>
          <view class="card-icon">🔄</view>
        </view>
        <view class="card-count">{{reviewWordsCount}}</view>
        <view class="card-desc">75% · 强化记忆</view>
      </view>
    </view>
    
    <!-- 智能学习按钮 -->
    <view class="smart-plan-btn" bindtap="goToSmartPlan">
      <view class="btn-content">
        <text class="btn-icon">🧠</text>
        <view class="btn-text">
          <text class="btn-title">开始学习</text>
          <text class="btn-desc">智能混合计划 · 共{{selectedTotal}}个词汇</text>
        </view>
      </view>
      <text class="btn-arrow">▶</text>
    </view>
  </view>

  <!-- 功能模块网格 -->
  <view class="features-section">
    <view class="features-header">
      <text class="section-title">特色功能</text>
    </view>
    <view class="features-grid grid-cols-3">
      <view class="feature-card" bindtap="goToKanaMerged">
        <view class="feature-icon kana-merged">あア</view>
        <text class="feature-name">假名对照</text>
      </view>
      
      <view class="feature-card" bindtap="goToGrammarStudy">
        <view class="feature-icon grammar">📖</view>
        <text class="feature-name">语法学习</text>
      </view>
      
      <view class="feature-card" bindtap="goToGrammarLibrary">
        <view class="feature-icon grammar-lib">📚</view>
        <text class="feature-name">语法库</text>
      </view>
      
      <view class="feature-card" bindtap="goToVoiceDialogue">
        <view class="feature-icon voice">🎤</view>
        <text class="feature-name">语音对话</text>
      </view>
      
      <view class="feature-card" bindtap="goToParser">
        <view class="feature-icon parser">🔍</view>
        <text class="feature-name">句子解析</text>
      </view>
      
      <view class="feature-card" bindtap="goToParserReview">
        <view class="feature-icon parser-review">📝</view>
        <text class="feature-name">解析复习</text>
      </view>
    </view>
  </view>

</view>