<view class="container">
  <!-- AIæä¾›å•†åˆ‡æ¢ -->
  <view class="ai-provider-switch">
    <text class="switch-label">AIæ¨¡å‹ï¼š</text>
    <view class="switch-buttons">
      <button 
        class="provider-btn {{aiProvider === 'tcb' ? 'active' : ''}}"
        bindtap="switchAIProvider"
        data-provider="tcb"
      >
        è…¾è®¯äº‘AI
      </button>
      <button 
        class="provider-btn {{aiProvider === 'hunyuan' ? 'active' : ''}}"
        bindtap="switchAIProvider"
        data-provider="hunyuan"
      >
        è…¾è®¯æ··å…ƒ
      </button>
      <button 
        class="provider-btn {{aiProvider === 'openai' ? 'active' : ''}}"
        bindtap="switchAIProvider"
        data-provider="openai"
      >
        OpenAI
      </button>
    </view>
  </view>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <view class="input-section">
    <textarea 
      class="sentence-input"
      placeholder="è¯·è¾“å…¥è¦åˆ†æçš„æ—¥è¯­å¥å­..."
      value="{{inputSentence}}"
      bindinput="onInputChange"
      auto-height
    />
    <view class="action-buttons">
      <button class="analyze-btn" bindtap="analyzeSentence" disabled="{{isAnalyzing}}">
        {{isAnalyzing ? 'åˆ†æä¸­...' : 'åˆ†æè¯­æ³•'}}
      </button>
      <button class="example-btn" bindtap="generateExamples" disabled="{{isAnalyzing}}">
        ç”Ÿæˆä¾‹å¥
      </button>
    </view>
  </view>

  <!-- åˆ†æç»“æœ -->
  <view class="result-section" wx:if="{{analysisResult}}">
    <view class="result-header">
      <text class="result-title">è¯­æ³•åˆ†æç»“æœ</text>
      <button class="copy-btn" bindtap="copyAnalysis" size="mini">å¤åˆ¶</button>
    </view>
    
    <!-- åˆ†æ®µæ˜¾ç¤º -->
    <view class="result-content">
      <view class="result-item" wx:if="{{analysisResult.sections.breakdown}}">
        <text class="item-title">å¥å­åˆ†è§£ï¼š</text>
        <text class="item-content">{{analysisResult.sections.breakdown}}</text>
      </view>
      
      <view class="result-item" wx:if="{{analysisResult.sections.grammar}}">
        <text class="item-title">è¯­æ³•è¦ç‚¹ï¼š</text>
        <text class="item-content">{{analysisResult.sections.grammar}}</text>
      </view>
      
      <view class="result-item" wx:if="{{analysisResult.sections.vocabulary}}">
        <text class="item-title">è¯æ±‡è§£é‡Šï¼š</text>
        <text class="item-content">{{analysisResult.sections.vocabulary}}</text>
      </view>
      
      <view class="result-item" wx:if="{{analysisResult.sections.translation}}">
        <text class="item-title">å¥å­ç¿»è¯‘ï¼š</text>
        <text class="item-content">{{analysisResult.sections.translation}}</text>
      </view>
    </view>
  </view>

  <!-- ä¾‹å¥å±•ç¤º -->
  <view class="examples-section" wx:if="{{examples.length > 0}}">
    <text class="examples-title">ç›¸å…³ä¾‹å¥</text>
    <view class="example-list">
      <view class="example-item" wx:for="{{examples}}" wx:key="index">
        <text class="example-sentence">{{item.sentence}}</text>
        <text class="example-reading" wx:if="{{item.reading}}">{{item.reading}}</text>
        <text class="example-translation" wx:if="{{item.translation}}">{{item.translation}}</text>
      </view>
    </view>
  </view>

  <!-- ä½¿ç”¨æç¤º -->
  <view class="tips" wx:if="{{!analysisResult && !isAnalyzing}}">
    <text class="tip-text">ğŸ’¡ è¾“å…¥æ—¥è¯­å¥å­ï¼ŒAIä¼šå¸®æ‚¨åˆ†æè¯­æ³•ç»“æ„</text>
    <text class="tip-text">ğŸ¤– æ”¯æŒè…¾è®¯äº‘AIã€è…¾è®¯æ··å…ƒå’ŒOpenAIä¸‰ç§AIæ¨¡å‹</text>
  </view>
</view>