<view class="container">
  <!-- å­¦ä¹ è¿›åº¦ -->
  <view class="progress-header">
    <text class="progress-text">{{currentIndex + 1}} / {{wordList.length}}</text>
    <view class="progress-dots">
      <view 
        wx:for="{{wordList}}" 
        wx:key="id"
        class="dot {{index <= currentIndex ? 'active' : ''}}"
      ></view>
    </view>
  </view>

  <!-- å•è¯å¡ç‰‡ -->
  <view class="word-card-wrapper">
    <view class="word-card" bindtap="playAudio">
      <view class="word-main">
        <text class="word-text">{{currentWord.word}}</text>
        <view class="word-kana">
          <text>{{currentWord.kana}}</text>
          <text class="romaji">{{currentWord.romaji}}</text>
        </view>
      </view>
      
      <view class="divider"></view>
      
      <view class="word-meaning">
        <text class="meaning-text">{{currentWord.meaning}}</text>
        <view class="word-meta">
          <text class="word-type">{{currentWord.type}}</text>
          <text class="word-level">{{currentWord.level}}</text>
        </view>
      </view>
      
      <view class="example-section" wx:if="{{showExample}}">
        <view class="example-item" wx:for="{{currentWord.examples}}" wx:key="index">
          <text class="example-jp">{{item.jp}}</text>
          <text class="example-cn">{{item.cn}}</text>
        </view>
      </view>
      
      <view class="audio-hint">
        <text>ğŸ”Š ç‚¹å‡»å¡ç‰‡æ’­æ”¾è¯­éŸ³</text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="btn-action" bindtap="toggleExample">
      {{showExample ? 'éšè—' : 'æ˜¾ç¤º'}}ä¾‹å¥
    </button>
    <button class="btn-action" bindtap="addToWordbook">
      <text class="{{inWordbook ? 'added' : ''}}">{{inWordbook ? 'å·²æ·»åŠ ' : 'åŠ å…¥ç”Ÿè¯æœ¬'}}</text>
    </button>
    <button class="btn-action" bindtap="testMCPConnection" style="background: #ff6b6b; color: white;">
      æµ‹è¯•MCPè¿æ¥
    </button>
    <button class="btn-action" bindtap="goToAITest" style="background: #667eea; color: white;">
      AIæµ‹è¯•
    </button>
  </view>

  <!-- æŒæ¡çŠ¶æ€æŒ‰é’® -->
  <view class="master-buttons">
    <button class="btn-master forgot" bindtap="markStatus" data-status="forgot">
      <text class="icon">ğŸ˜•</text>
      <text>ä¸è®¤è¯†</text>
    </button>
    <button class="btn-master fuzzy" bindtap="markStatus" data-status="fuzzy">
      <text class="icon">ğŸ¤”</text>
      <text>æ¨¡ç³Š</text>
    </button>
    <button class="btn-master mastered" bindtap="markStatus" data-status="mastered">
      <text class="icon">ğŸ˜Š</text>
      <text>æŒæ¡</text>
    </button>
  </view>

  <!-- å®Œæˆæç¤º -->
  <view class="complete-modal" wx:if="{{showComplete}}">
    <view class="modal-content">
      <text class="complete-title">ğŸ‰ ä»Šæ—¥å­¦ä¹ å®Œæˆï¼</text>
      <text class="complete-desc">ä½ å·²ç»å­¦ä¹ äº† {{wordList.length}} ä¸ªæ–°è¯</text>
      <view class="complete-stats">
        <view class="stat-item">
          <text class="stat-label">æŒæ¡</text>
          <text class="stat-value">{{masteredCount}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">æ¨¡ç³Š</text>
          <text class="stat-value">{{fuzzyCount}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">ä¸è®¤è¯†</text>
          <text class="stat-value">{{forgotCount}}</text>
        </view>
      </view>
      <button class="btn-primary" bindtap="goBack">è¿”å›é¦–é¡µ</button>
    </view>
  </view>
</view>