<!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section">
    <view wx:if="{{isLoggedIn}}" class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userProfile.nickname || 'è¯­ä¼´å›ç”¨æˆ·'}}</text>
        <text class="level">{{userProfile.currentLevel === 'beginner' ? 'åˆå­¦è€…' : userProfile.currentLevel === 'intermediate' ? 'ä¸­çº§' : 'é«˜çº§'}}</text>
        <text class="goal">{{userProfile.learningGoal === 'daily' ? 'æ—¥å¸¸äº¤æµ' : userProfile.learningGoal === 'exam' ? 'è€ƒè¯•å¤‡è€ƒ' : userProfile.learningGoal === 'business' ? 'å•†åŠ¡æ—¥è¯­' : 'æ—…æ¸¸æ—¥è¯­'}}</text>
      </view>
      <view class="edit-btn" bindtap="goToRegister">
        <text class="edit-icon">âœï¸</text>
      </view>
    </view>
    
    <view wx:else class="login-prompt">
      <image class="login-avatar" src="/images/default-avatar.png" mode="aspectFit"></image>
      <view class="login-info">
        <text class="login-title">ç«‹å³ç™»å½•</text>
        <text class="login-desc">åŒæ­¥å­¦ä¹ è®°å½•ï¼Œä¸ªæ€§åŒ–å­¦ä¹ ä½“éªŒ</text>
      </view>
      <button class="login-btn" bindtap="goToRegister">ç™»å½•/æ³¨å†Œ</button>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½å…¥å£ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToLearningProgress">
      <view class="action-icon">ğŸ“Š</view>
      <view class="action-content">
        <text class="action-title">å­¦ä¹ è¿›åº¦</text>
        <text class="action-desc">æŸ¥çœ‹å­¦ä¹ è½¨è¿¹å’Œæˆå°±</text>
      </view>
      <text class="action-arrow">ï¼</text>
    </view>
    
    <view class="action-item" bindtap="showLearningManagement">
      <view class="action-icon">âš™ï¸</view>
      <view class="action-content">
        <text class="action-title">å­¦ä¹ ç®¡ç†</text>
        <text class="action-desc">é‡ç½®æŒæ¡çŠ¶æ€å’Œæ•°æ®ç®¡ç†</text>
      </view>
      <text class="action-arrow">ï¼</text>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="section-title">å­¦ä¹ æ¦‚è§ˆ</view>
    <view class="stats-grid">
      <view class="stat-card" bindtap="goToMasteryStats">
        <text class="stat-number">{{learningStats.studyDays}}</text>
        <text class="stat-label">å­¦ä¹ å¤©æ•°</text>
        <text class="stat-icon">ğŸ“…</text>
      </view>
      <view class="stat-card" bindtap="goToMasteryStats">
        <text class="stat-number">{{learningStats.totalWords}}</text>
        <text class="stat-label">è¯æ±‡æ€»æ•°</text>
        <text class="stat-icon">ğŸ“š</text>
      </view>
      <view class="stat-card" bindtap="goToMasteryStats">
        <text class="stat-number">{{learningStats.masteredWords}}</text>
        <text class="stat-label">å·²æŒæ¡</text>
        <text class="stat-icon">âœ…</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{learningStats.todayStudyTime}}</text>
        <text class="stat-label">ä»Šæ—¥å­¦ä¹ (åˆ†é’Ÿ)</text>
        <text class="stat-icon">â±ï¸</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="section-title">åŠŸèƒ½è®¾ç½®</view>
    
    <!-- æ•°æ®åŒæ­¥ -->
    <view wx:if="{{isLoggedIn}}" class="menu-item" bindtap="syncLearningData">
      <view class="menu-icon">â˜ï¸</view>
      <view class="menu-content">
        <text class="menu-title">åŒæ­¥å­¦ä¹ æ•°æ®</text>
        <text class="menu-desc">å°†å­¦ä¹ è®°å½•åŒæ­¥åˆ°äº‘ç«¯</text>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
    
    <!-- å­¦ä¹ ç»Ÿè®¡ -->
    <view class="menu-item" bindtap="goToMasteryStats">
      <view class="menu-icon">ğŸ“Š</view>
      <view class="menu-content">
        <text class="menu-title">å­¦ä¹ ç»Ÿè®¡</text>
        <text class="menu-desc">æŸ¥çœ‹è¯¦ç»†çš„å­¦ä¹ è¿›åº¦</text>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
    
    <!-- ç¼“å­˜ç®¡ç† -->
    <view class="menu-item" bindtap="clearAudioCache">
      <view class="menu-icon">ğŸ—‘ï¸</view>
      <view class="menu-content">
        <text class="menu-title">æ¸…ç†éŸ³é¢‘ç¼“å­˜</text>
        <text class="menu-desc">{{cacheStats.fileCount}}ä¸ªæ–‡ä»¶ï¼Œ{{cacheStats.totalSizeMB}}MB</text>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
  </view>

  <!-- å­¦ä¹ ç›®æ ‡å¡ç‰‡ -->
  <view wx:if="{{isLoggedIn && userProfile}}" class="goal-section">
    <view class="section-title">å­¦ä¹ ç›®æ ‡</view>
    <view class="goal-card">
      <view class="goal-header">
        <text class="goal-title">æ¯æ—¥ç›®æ ‡</text>
        <text class="goal-time">{{userProfile.studyTimePerDay}}åˆ†é’Ÿ</text>
      </view>
      <view class="goal-progress">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{learningStats.todayStudyTime / userProfile.studyTimePerDay * 100}}%"></view>
        </view>
        <text class="progress-text">{{learningStats.todayStudyTime}}/{{userProfile.studyTimePerDay}}åˆ†é’Ÿ</text>
      </view>
    </view>
  </view>

  <!-- ç®¡ç†å‘˜åŠŸèƒ½åŒºï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰ -->
  <view wx:if="{{isAdmin}}" class="admin-section">
    <view class="section-title">
      <text class="title-text">ç®¡ç†å‘˜åŠŸèƒ½</text>
      <text class="admin-badge">ADMIN</text>
    </view>
    <view class="function-list">
      <view class="function-item" bindtap="goToUserManagement">
        <view class="function-content">
          <view class="function-icon">ğŸ‘¥</view>
          <view class="function-info">
            <text class="function-name">ç”¨æˆ·ç®¡ç†</text>
            <text class="function-desc">å®¡æ ¸æ³¨å†Œç”³è¯·ï¼Œç®¡ç†ç”¨æˆ·</text>
          </view>
        </view>
        <view class="function-arrow">></view>
      </view>
    </view>
  </view>

  <!-- éšè—çš„ç®¡ç†å‘˜è°ƒè¯•å…¥å£ï¼ˆé•¿æŒ‰ç‰ˆæœ¬å·è§¦å‘ï¼‰ -->
  <view class="version-info" bindlongpress="goToAdminDebug">
    <text class="version-text">è¯­ä¼´å› v1.0.0</text>
  </view>
</view>