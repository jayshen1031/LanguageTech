<!-- å­¦ä¹ è¿›åº¦ç¡®è®¤ç»„ä»¶ -->
<view class="learning-progress-container {{size}}" wx:if="{{learningItem && displayInfo}}">
  
  <!-- ç®€åŒ–ç‰ˆæœ¬ (small) -->
  <view wx:if="{{size === 'small'}}" class="simple-version">
    <button 
      class="learn-btn simple {{isLoading ? 'loading' : ''}}"
      bindtap="onConfirmLearning"
      disabled="{{isLoading}}"
    >
      <text class="btn-icon">{{displayInfo.icon}}</text>
      <text class="btn-text">+1</text>
      <text class="learn-count">({{displayInfo.learnCount}})</text>
    </button>
  </view>

  <!-- å®Œæ•´ç‰ˆæœ¬ (normal/large) -->
  <view wx:else class="full-version">
    
    <!-- å­¦ä¹ çŠ¶æ€æ˜¾ç¤º -->
    <view class="status-display" bindtap="showLearningDetails">
      <view class="status-info">
        <text class="content-type">{{displayInfo.icon}} {{displayInfo.typeName}}</text>
        <text class="learn-count">å·²å­¦{{displayInfo.learnCount}}æ¬¡</text>
        <text class="status-badge {{learningItem.status}}">{{displayInfo.status}}</text>
      </view>
      
      <!-- è¿›åº¦æ¡ -->
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{displayInfo.progressPercent}}%"></view>
        <text class="progress-text">{{displayInfo.nextTarget}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
    <view class="action-buttons">
      
      <!-- ä¸»è¦å­¦ä¹ æŒ‰é’® -->
      <button 
        class="learn-btn primary {{isLoading ? 'loading' : ''}}"
        bindtap="onConfirmLearning"
        disabled="{{isLoading}}"
      >
        <text class="btn-icon">ğŸ“–</text>
        <text class="btn-text">å­¦äº†ä¸€æ¬¡</text>
      </button>

      <!-- çŠ¶æ€æ ‡è®°æŒ‰é’® -->
      <view class="status-buttons" wx:if="{{showDetails}}">
        
        <!-- ç•¥æ‡‚æŒ‰é’® -->
        <button 
          wx:if="{{displayInfo.canMarkFamiliar}}"
          class="status-btn familiar {{isLoading ? 'loading' : ''}}"
          bindtap="onMarkFamiliar"
          disabled="{{isLoading}}"
        >
          <text class="btn-icon">ğŸ¤”</text>
          <text class="btn-text">ç•¥æ‡‚äº†</text>
        </button>

        <!-- æŒæ¡æŒ‰é’® -->
        <button 
          wx:if="{{displayInfo.canMarkMastered}}"
          class="status-btn mastered {{isLoading ? 'loading' : ''}}"
          bindtap="onMarkMastered"
          disabled="{{isLoading}}"
        >
          <text class="btn-icon">âœ…</text>
          <text class="btn-text">æŒæ¡äº†</text>
        </button>
        
      </view>
    </view>

    <!-- è¯¦ç»†ä¿¡æ¯å±•ç¤º (largeç‰ˆæœ¬) -->
    <view wx:if="{{size === 'large' && showDetails}}" class="detailed-info">
      <view class="info-item">
        <text class="info-label">å­¦ä¹ è¿›åº¦</text>
        <text class="info-value">{{displayInfo.progressPercent}}%</text>
      </view>
      
      <view class="info-item">
        <text class="info-label">ä¸‹ä¸€ç›®æ ‡</text>
        <text class="info-value">{{displayInfo.nextTarget}}</text>
      </view>
      
      <view class="info-item" wx:if="{{learningItem.userNotes}}">
        <text class="info-label">å­¦ä¹ ç¬”è®°</text>
        <text class="info-value">{{learningItem.userNotes}}</text>
      </view>
    </view>

  </view>

</view>

<!-- æœªåˆå§‹åŒ–çŠ¶æ€ -->
<view wx:else class="placeholder">
  <text class="placeholder-text">æ­£åœ¨åŠ è½½å­¦ä¹ è¿›åº¦...</text>
</view>